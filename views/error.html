<!DOCTYPE html>

<html lang="de">

<head>
    <meta charset="UTF-8"/>
    <title>Error</title>

    <link href="error.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400" rel="stylesheet"/>
</head>

<body>
<h1>
    <span class="material-symbols-outlined">error</span>
    Seite konnte nicht geladen werden
</h1>

<div class="error-details">
    <div><span class="label">Fehlercode:</span> <span id="code"></span></div>
    <div><span class="label">Beschreibung:</span> <span id="desc"></span></div>
    <div><span class="label">URL:</span> <span id="url"></span></div>
</div>

<a class="reloadBtn" href="#" onclick="reload()">
    <button>
        <span class="material-symbols-outlined">refresh</span>
        Erneut versuchen
    </button>
</a>

<script>
    const errorMessages = {
        "ERR_NAME_NOT_RESOLVED": "Die Domain konnte nicht aufgelöst werden. Bitte überprüfen Sie Ihre Internetverbindung oder die Adresse.",
        "ERR_CONNECTION_TIMED_OUT": "Die Verbindung hat zu lange gedauert.",
        "ERR_INTERNET_DISCONNECTED": "Es besteht keine Internetverbindung."
    };

    const httpStatusMessages = {
        400: "Ungültige Anfrage – Der Server konnte die Anfrage nicht verstehen.",
        401: "Nicht autorisiert – Bitte anmelden.",
        403: "Verboten – Zugriff verweigert.",
        404: "Nicht gefunden – Die Ressource existiert nicht.",
        500: "Interner Serverfehler – Bitte später erneut versuchen.",
        502: "Bad Gateway – Der Server hat eine ungültige Antwort erhalten.",
        503: "Service nicht verfügbar – Server momentan überlastet oder in Wartung."
    };

    const errorUnknown = "Unbekannter Fehler."

    const params = new URLSearchParams(location.search);

    const code = params.get("code");
    const desc = params.get("desc");

    document.getElementById('code').textContent = code || '—';
    document.getElementById('desc').textContent = (desc ? `${errorMessages[desc] || httpStatusMessages[code] || errorUnknown} (${desc})` : null) || (code ? httpStatusMessages[code] || errorUnknown : null) || '—';
    document.getElementById('url').textContent = params.get('url') || '—';

    function reload() {
        // Versucht, die ursprüngliche URL erneut zu laden
        const target = params.get('url');
        if (target) {
            location.href = target;
        } else {
            location.reload();
        }
    }
</script>
</body>

</html>